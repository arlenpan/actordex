function writeUserData(e,t,o,r){var a=database.ref("users/"+e);a.once("value").then(function(e){null===e.val()&&a.set({username:t,email:o,image:r})})}var config={apiKey:"AIzaSyCCUaH1bW1oB7kgPUkIqRLI2-RCPyODvOo",authDomain:"actor-dex-final.firebaseapp.com",databaseURL:"https://actor-dex-final.firebaseio.com",storageBucket:"actor-dex-final.appspot.com",messagingSenderId:"810520072391"},uiConfig={signInSuccessUrl:"/",signInOptions:[firebase.auth.EmailAuthProvider.PROVIDER_ID,firebase.auth.GoogleAuthProvider.PROVIDER_ID],tosUrl:"<your-tos-url>"};firebase.initializeApp(config);var ui=new firebaseui.auth.AuthUI(firebase.auth());ui.start("#firebaseui-auth-container",uiConfig);var database=firebase.database(),storage=firebase.storage();window.addEventListener("load",function(){firebase.auth().onAuthStateChanged(function(e){vm.displayContent=!0,e?(vm.signedIn=!0,vm.displayName=e.displayName,vm.email=e.email,vm.emailVerified=e.emailVerified,vm.photoURL=e.photoURL||e.providerData[0].photoURL,vm.uid=e.uid,vm.providerData=e.providerData,writeUserData(e.uid,e.displayName,e.email,e.photoURL),vm.showAL=!0):(vm.signedIn=!1,vm.accountDetails="")},function(e){console.log(e)})});var favoriteList=Vue.component("favorite-list",{template:"#favorite-list-temp",firebase:function(){return{favorites:database.ref("users/"+firebase.auth().currentUser.uid).child("favorites")}},methods:{showActorInfo:function(e){vm.showActorInfo(e)}}}),actorList=Vue.component("actor-list",{template:"#actor-list-temp",props:["signedIn"],firebase:{actors:database.ref("actors")},methods:{addForm:function(){vm.showAdd=!0,vm.showFail=!1,vm.showAL=!1},showActorInfo:function(e){vm.showActorInfo(e)}}}),searchBar=Vue.component("search-bar",{template:"#search-bar-temp",data:function(){return{selection:""}},firebase:{actors:database.ref("actors")},methods:{viewActor:function(){var e=this.selection;database.ref("actors/"+e).once("value").then(function(t){var o=t.val();o?vm.showActorInfo(e):vm.showFail=!0})}}}),searchFail=Vue.component("search-fail",{template:"#fail-search-temp",props:["signedIn"],methods:{toggleShowFail:function(){vm.showFail=!1},toggleShowLogin:function(){vm.showLogin=!0,vm.showFail=!1},addForm:function(){vm.showAdd=!0,vm.showFail=!1,vm.showAL=!1}}}),addForm=Vue.component("add-form",{template:"#add-form-temp",data:function(){return{newActorName:"",newActorAge:"",newActorBio:"",newActorGender:[],newActorCountry:""}},methods:{cancel:function(){vm.showAdd=!1},addActor:function(){var e=this.newActorName,t=this.newActorAge,o=this.newActorBio,r=this.newActorGender,a=this.newActorCountry,i=document.getElementById("af-image").files[0];if(e&&t&&o&&r&&a&&i){var n=storage.ref().child("images/"+i.name).put(i);n.on(firebase.storage.TaskEvent.STATE_CHANGED,null,null,function(){var i=n.snapshot.downloadURL;database.ref("actors/"+e).set({name:e,age:t,bio:o,image:i,gender:r,country:a}),vm.showActorInfo(e)}),this.newActorName="",this.newActorAge="",this.newActorBio="",this.newActorGender=[],this.newActorCountry=""}else alert("Please fill out all the fields!")}}}),actorInfo=Vue.component("actor-info",{template:"#actor-info-temp",data:function(){return{newMovieName:""}},props:["name","age","bio","image","gender","country","showDelete","favorite","movies","showDeleteMovie","signedIn"],methods:{showEditForm:function(){vm.showEdit=!0},addFavorite:function(){var e=database.ref("users/"+firebase.auth().currentUser.uid).child("favorites").child(this.name);e.once("value").then(function(t){null===t.val()&&(e.set(!0),vm.currFavorite=!0)})},removeFavorite:function(){database.ref("users/"+firebase.auth().currentUser.uid).child("favorites").child(this.name).remove(),vm.currFavorite=!1},back:function(){vm.submitAdd=!1,vm.showAL=!0},addNewMovie:function(){""!=this.newMovieName&&(vm.currActorMovies.push(this.newMovieName),this.newMovieName="",database.ref("actors/"+vm.currKey).update({movies:vm.currActorMovies}))},removeMovie:function(){vm.currActorMovies.splice(arguments[0],1),database.ref("actors/"+vm.currKey).update({movies:vm.currActorMovies})}}}),newMovieItem=Vue.component("new-movie-item",{template:"#movie-item-temp",props:["title","showDeleteMovie","signedIn"]}),deleteMovie=Vue.component("delete-movie",{template:"#delete-movie-temp"}),editActor=Vue.component("edit-form",{template:"#edit-form-temp",data:function(){return{editName:"",editAge:"",editBio:"",editGender:[],editCountry:""}},methods:{cancel:function(){vm.showEdit=!1},editActor:function(){var e=this.editName,t=this.editAge,o=this.editBio,r=this.editGender,a=this.editCountry;""!=e&&(database.ref("actors/"+vm.currKey).update({name:e}),vm.currActorName=e),""!=t&&(database.ref("actors/"+vm.currKey).update({age:t}),vm.currActorAge=t),""!=o&&(database.ref("actors/"+vm.currKey).update({bio:o}),vm.currActorBio=o),r.length>0&&(database.ref("actors/"+vm.currKey).update({gender:r}),vm.currActorGender=r),""!=a&&(database.ref("actors/"+vm.currKey).update({country:a}),vm.currActorCountry=a);var i,n=document.getElementById("ef-image").files;if(n.length>0){var s=storage.ref().child("images/"+n[0].name).put(n[0]);s.on(firebase.storage.TaskEvent.STATE_CHANGED,null,null,function(){i=s.snapshot.downloadURL,database.ref("actors/"+vm.currKey).update({image:i}),vm.currActorImage=i,vm.currActorImagePath=n[0].name})}vm.showEdit=!1}}}),deleteActor=Vue.component("delete-actor",{template:"#delete-actor-temp",methods:{deleteActor:function(){database.ref("actors/"+vm.currKey).remove(),storage.ref().child("images/"+vm.currActorImagePath)["delete"](),vm.submitAdd=!1,vm.showDelete=!1,vm.currActorName="",vm.currActorAge="",vm.currActorBio="",vm.currActorImage="",vm.currActorImagePath="",vm.currActorGender=[],vm.currActorCountry="",vm.currActorMovies=[],vm.currKey=""}}}),vm=new Vue({el:"#vm",data:{displayContent:!1,signedIn:!1,submitAdd:!1,showDelete:!1,showDeleteMovie:!1,showEdit:!1,displayName:null,email:null,emailVerified:null,photoURL:null,uid:null,providerData:null,currActorName:"",currActorAge:"",currActorBio:"",currActorImage:"",currActorImagePath:"",currActorGender:"",currActorCountry:"",currActorMovies:[],currFavorite:!1,currKey:"",selectionValue:"",showLogin:!1,showFav:!1,showAdd:!1,showFail:!1,showAL:!0},methods:{signOut:function(){firebase.auth().signOut().then(function(){console.log("Signed out!")}),this.home()},viewAL:function(){vm.showAL=!0,vm.showFav=!1,vm.submitAdd=!1,vm.showAdd=!1},home:function(){vm.submitAdd=!1,vm.showEdit=!1,vm.showFav=!1,vm.showAdd=!1,vm.showFail=!1,vm.showDelete=!1,vm.showDeleteMovie=!1,vm.showAL=!0},showFavList:function(){vm.showFav=!0,vm.showAdd=!1,vm.showAL=!1},showActorInfo:function(e){database.ref("actors/"+e).once("value").then(function(e){if(vm.currActorName=e.val().name,vm.currActorAge=e.val().age,vm.currActorBio=e.val().bio,vm.currActorImage=e.val().image,vm.currActorGender=e.val().gender,vm.currActorCountry=e.val().country,null==e.val().movies?vm.currActorMovies=[]:vm.currActorMovies=e.val().movies,vm.currKey=e.key,firebase.auth().currentUser){var t=database.ref("users/"+firebase.auth().currentUser.uid).child("favorites").child(vm.currActorName);t.once("value").then(function(e){vm.currFavorite=e.val()})}}),vm.submitAdd=!0,vm.showEdit=!1,vm.showFav=!1,vm.showAdd=!1,vm.showFail=!1,vm.showAL=!1}}});